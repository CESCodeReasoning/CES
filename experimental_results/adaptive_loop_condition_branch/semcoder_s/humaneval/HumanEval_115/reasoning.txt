The function `max_fill` takes a grid of integers and a capacity as input. It calculates the total number of times the capacity can be filled in each row of the grid by summing up the elements in each row, dividing by the capacity, and rounding up to the nearest integer using `math.ceil`. It then sums up these values for all rows to get the total number of times the capacity can be filled in the grid.

For the input `max_fill([[0,0,1,0], [0,1,0,0], [1,1,1,1]], 1)`, we have:
- Row 1: `math.ceil(sum([0,0,1,0])/1) = math.ceil(1/1) = math.ceil(1) = 1`
- Row 2: `math.ceil(sum([0,1,0,0])/1) = math.ceil(1/1) = math.ceil(1) = 1`
- Row 3: `math.ceil(sum([1,1,1,1])/1) = math.ceil(4/1) = math.ceil(4) = 4`

Therefore, the total number of times the capacity can be filled in the grid is `1 + 1 + 4 = 6`.
